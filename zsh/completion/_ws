#compdef ws

local curcontext="$curcontext" state line
typeset -A opt_args

_arguments \
    "1:Workspace:->workspace"\
    "2:Project:->project"

case "$state" in
    workspace)
        compadd `ls -1 "$WORKSPACE_ROOT_DIR/"`
        ;;
    project)
        if [ $AT_WORK -eq 1 ]; then
            compadd `ls -1 "$WORKSPACE_ROOT_DIR/$words[2]/src/" | grep -v -e build`
        fi
        ;;
esac
